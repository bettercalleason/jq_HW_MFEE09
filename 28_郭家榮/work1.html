<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>work1</title>
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
      integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z"
      crossorigin="anonymous"
    />
    <style>

      .box {
        width: 50px;
        height: 50px;
        background-color: #333;
        border-radius: 10px;
        margin: 4px;
        text-align: center;
        line-height: 50px;
        color: #ddd;
        transition: 2s;
      }

      .logo {
        width: 214px;
        font-size: 30px;
        background-color: #333;
        text-align: center;
        border-radius: 5px;
        line-height: 50px;
        color: #ddd;
        transition: 0.3s;
      }

      .keyboard {
        background-color: #222;
        padding: 20px;
        width: 1350px;
        border-radius: 15px;
      }

      .laser {
        transition: 0.3s;
      }

      .fire {
        transition: 1.2s;
      }
    </style>
  </head>

  <body>
    <div class="keyboard ml-5 mt-5">
      <button class="Breathe btn btn-primary mb-5 mr-3">呼吸燈</button>
      <button class="stopBreath btn btn-primary mb-5 mr-3">停止呼吸燈</button>
     
      <button class="swich btn btn-primary mb-5">雷射</button>

      <div class="1-row d-flex mb-4">
        <div class="box fire" data-y="0" data-x="0" style="margin-right: 62px">
          esc
        </div>
        <div class="box fire" data-y="0" data-x="1">F1</div>
        <div class="box fire" data-y="0" data-x="2">F2</div>
        <div class="box fire" data-y="0" data-x="3">F3</div>
        <div class="box fire" data-y="0" data-x="4" style="margin-right: 25px">
          F4
        </div>
        <div class="box fire" data-y="0" data-x="5">F5</div>
        <div class="box fire" data-y="0" data-x="6">F6</div>
        <div class="box fire" data-y="0" data-x="7">F7</div>
        <div class="box fire" data-y="0" data-x="8" style="margin-right: 25px">
          F8
        </div>
        <div class="box fire" data-y="0" data-x="9">F9</div>
        <div class="box fire" data-y="0" data-x="10">F10</div>
        <div class="box fire" data-y="0" data-x="11">F11</div>
        <div class="box fire" data-y="0" data-x="12" style="margin-right: 25px">
          F12
        </div>
        <div class="box fire" data-y="0" data-x="13">PS</div>
        <div class="box fire" data-y="0" data-x="14">SL</div>
        <div class="box fire" data-y="0" data-x="15" style="margin-right: 25px">
          PB
        </div>
        <div class="logo" data-y="0" data-x="16">jQuery</div>
      </div>
      <div class="2-row d-flex">
        <div class="box fire" data-y="1" data-x="0">`</div>
        <div class="box fire" data-y="1" data-x="1">1</div>
        <div class="box fire" data-y="1" data-x="2">2</div>
        <div class="box fire" data-y="1" data-x="3">3</div>
        <div class="box fire" data-y="1" data-x="4">4</div>
        <div class="box fire" data-y="1" data-x="5">5</div>
        <div class="box fire" data-y="1" data-x="6">6</div>
        <div class="box fire" data-y="1" data-x="7">7</div>
        <div class="box fire" data-y="1" data-x="8">8</div>
        <div class="box fire" data-y="1" data-x="9">9</div>
        <div class="box fire" data-y="1" data-x="10">0</div>
        <div class="box fire" data-y="1" data-x="11">-</div>
        <div class="box fire" data-y="1" data-x="12">=</div>
        <div
          class="box fire"
          data-y="1"
          data-x="13"
          style="margin-right: 25px; width: 90px"
        >
          bcakspace
        </div>
        <div class="box fire" data-y="1" data-x="14">INS</div>
        <div class="box fire" data-y="1" data-x="15">HM</div>
        <div class="box fire" data-y="1" data-x="16" style="margin-right: 25px">
          PU
        </div>
        <div class="box fire" data-y="1" data-x="17">num</div>
        <div class="box fire" data-y="1" data-x="18">/</div>
        <div class="box fire" data-y="1" data-x="19">*</div>
        <div class="box fire" data-y="1" data-x="20">-</div>
      </div>

      <div class="3-row d-flex">
        <div class="box fire" data-y="2" data-x="0" style="width: 75px">
          TAB
        </div>
        <div class="box fire" data-y="2" data-x="1">Q</div>
        <div class="box fire" data-y="2" data-x="2">W</div>
        <div class="box fire" data-y="2" data-x="3">E</div>
        <div class="box fire" data-y="2" data-x="4">R</div>
        <div class="box fire" data-y="2" data-x="5">T</div>
        <div class="box fire" data-y="2" data-x="6">Y</div>
        <div class="box fire" data-y="2" data-x="7">U</div>
        <div class="box fire" data-y="2" data-x="8">I</div>
        <div class="box fire" data-y="2" data-x="9">O</div>
        <div class="box fire" data-y="2" data-x="10">P</div>
        <div class="box fire" data-y="2" data-x="11">[</div>
        <div class="box fire" data-y="2" data-x="12">]</div>
        <div
          class="box fire"
          data-y="2"
          data-x="13"
          style="margin-right: 25px; width: 65px"
        >
          \
        </div>
        <div class="box fire" data-y="2" data-x="14">DEL</div>
        <div class="box fire" data-y="2" data-x="15">END</div>
        <div class="box fire" data-y="2" data-x="16" style="margin-right: 25px">
          PD
        </div>
        <div class="box fire" data-y="2" data-x="17">7</div>
        <div class="box fire" data-y="2" data-x="18">8</div>
        <div class="box fire" data-y="2" data-x="19">9</div>
        <div
          class="box fire"
          data-y="2"
          data-x="20"
          style="z-index: 1; border-radius: 10px 10px 2px 2px"
        >
          +
        </div>
      </div>

      <div class="4-row d-flex">
        <div class="box fire" data-y="3" data-x="0" style="width: 95px">
          CAPS
        </div>
        <div class="box fire" data-y="3" data-x="1">A</div>
        <div class="box fire" data-y="3" data-x="2">S</div>
        <div class="box fire" data-y="3" data-x="3">D</div>
        <div class="box fire" data-y="3" data-x="4">F</div>
        <div class="box fire" data-y="3" data-x="5">G</div>
        <div class="box fire" data-y="3" data-x="6">H</div>
        <div class="box fire" data-y="3" data-x="7">J</div>
        <div class="box fire" data-y="3" data-x="8">K</div>
        <div class="box fire" data-y="3" data-x="9">L</div>
        <div class="box fire" data-y="3" data-x="10">;</div>
        <div class="box fire" data-y="3" data-x="11">'</div>
        <div
          class="box fire"
          data-y="3"
          data-x="12"
          style="margin-right: 221px; width: 102px"
        >
          ENTER
        </div>
        <div class="box fire" style="display: none"></div>
        <div class="box fire" style="display: none"></div>
        <div class="box fire" style="display: none"></div>
        <div class="box fire" data-y="3" data-x="17">4</div>
        <div class="box fire" data-y="3" data-x="18">5</div>
        <div class="box fire" data-y="3" data-x="19">6</div>
        <div
          class="box fire"
          data-y="3"
          data-x="16"
          style="height: 72px; margin-top: -20px"
        ></div>
      </div>

      <div class="5-row d-flex">
        <div class="box fire" data-y="4" data-x="0" style="width: 124px">
          SHIFT
        </div>
        <div class="box fire" data-y="4" data-x="1">Z</div>
        <div class="box fire" data-y="4" data-x="2">X</div>
        <div class="box fire" data-y="4" data-x="3">C</div>
        <div class="box fire" data-y="4" data-x="4">V</div>
        <div class="box fire" data-y="4" data-x="5">B</div>
        <div class="box fire" data-y="4" data-x="6">N</div>
        <div class="box fire" data-y="4" data-x="7">M</div>
        <div class="box fire" data-y="4" data-x="8">,</div>
        <div class="box fire" data-y="4" data-x="9">.</div>
        <div class="box fire" data-y="4" data-x="10">/</div>
        <div
          class="box fire"
          data-y="4"
          data-x="11"
          style="width: 130px; margin-right: 84px"
        >
          SHIFT
        </div>
        <div class="box fire" style="display: none"></div>
        <div class="box fire" data-y="4" data-x="12" style="margin-right: 84px">
          UP
        </div>
        <div class="box fire" style="display: none"></div>
        <div class="box fire" data-y="4" data-x="13">1</div>
        <div class="box fire" data-y="4" data-x="14">2</div>
        <div class="box fire" data-y="4" data-x="15">3</div>
        <div
          class="box fire"
          data-y="4"
          data-x="16"
          style="z-index: 1; border-radius: 10px 10px 2px 2px"
        >
          ENTER
        </div>
      </div>

      <div class="6-row d-flex">
        <div class="box fire" data-y="5" data-x="0" style="width: 86px">
          CTRL
        </div>
        <div class="box fire" data-y="5" data-x="1">WIN</div>
        <div class="box fire" data-y="5" data-x="2" style="width: 75px">
          ALT
        </div>
        <div class="box fire" data-y="5" data-x="3" style="width: 314px">
          SPACE
        </div>
        <div class="box fire" data-y="5" data-x="4" style="width: 75px">
          ALT
        </div>
        <div class="box fire" data-y="5" data-x="5">FN</div>
        <div class="box fire" data-y="5" data-x="6">WIN</div>
        <div
          class="box fire"
          data-y="5"
          data-x="7"
          style="width: 86px; margin-right: 26px"
        >
          CTRL
        </div>
        <div class="box fire" data-y="5" data-x="8">LEFT</div>
        <div class="box fire" data-y="5" data-x="9">DOWN</div>
        <div class="box fire" data-y="5" data-x="10" style="margin-right: 26px">
          RIGHT
        </div>
        <div class="box fire" data-y="5" data-x="11" style="width: 108px">
          0
        </div>
        <div class="box fire" data-y="5" data-x="12">.</div>
        <div
          class="box fire"
          data-y="5"
          data-x="13"
          style="height: 72px; margin-top: -20px"
        ></div>
      </div>
    </div>

    <script
      src="https://code.jquery.com/jquery-3.5.1.js"
      integrity="sha256-QWo7LDvxbWT2tbbQ97B53yJnYU3WhH/C8ycbRAkjPDc="
      crossorigin="anonymous"
    ></script>
    <script>
      let count = 0;
      let count1 = 0;
      let interval;
      let laserStartInterval;
      let laserStopInterval;
      let laserStartSettimeout;
      let breathSetinterval;

      $(".swich").on("click", function () {
        if ($(".box").hasClass("laser")) {
          $(".box").removeClass("laser");
          $(".box").addClass("fire");
          $(this).text("雷射");
        } else {
          $(".box").removeClass("fire");
          $(".box").addClass("laser");
          $(this).text("煙火");
        }
      });

      $(".Breathe").on("click", function () {
        if ($(".box").hasClass("laser") || $(".box").hasClass("fire")) {
          $(".box").removeClass("fire");
          $(".box").removeClass("laser");
        }
        
        //紅
        $(".box").css("box-shadow", "0px 0px 30px  #FF0000");
        //暗
        setTimeout(() => {
          $(".box").css("box-shadow", "0px 0px 0px  #000000");
        }, 2000);
        //澄
        setTimeout(() => {
          $(".box").css("box-shadow", "0px 0px 30px  #ff8000");
        }, 4000);
        //暗
        setTimeout(() => {
          $(".box").css("box-shadow", "0px 0px 0px  #000000");
        }, 6000);
        //黃
        setTimeout(() => {
          $(".box").css("box-shadow", "0px 0px 30px  #ffff00");
        }, 8000);
        //暗
        setTimeout(() => {
          $(".box").css("box-shadow", "0px 0px 0px  #000000");
        }, 10000);
        //綠
        setTimeout(() => {
          $(".box").css("box-shadow", "0px 0px 30px  #00ff00");
        }, 12000);
        //暗
        setTimeout(() => {
          $(".box").css("box-shadow", "0px 0px 0px  #000000");
        }, 14000);
        //藍
        setTimeout(() => {
          $(".box").css("box-shadow", "0px 0px 30px  #0000ff");
        }, 16000);
        //暗
        setTimeout(() => {
          $(".box").css("box-shadow", "0px 0px 0px  #000000");
        }, 18000);
        //靛
        setTimeout(() => {
          $(".box").css("box-shadow", "0px 0px 30px  #7f00ff");
        }, 20000);
        //暗
        setTimeout(() => {
          $(".box").css("box-shadow", "0px 0px 0px  #000000");
        }, 22000);
        //紫
        setTimeout(() => {
          $(".box").css("box-shadow", "0px 0px 30px  #ff00ff");
        }, 24000);
        //暗
        setTimeout(() => {
          $(".box").css("box-shadow", "0px 0px 0px  #000000");
        }, 26000);

        breathSetinterval =  setInterval(() => {
          //紅
          $(".box").css("box-shadow", "0px 0px 30px  #FF0000");
          //暗
          setTimeout(() => {
            $(".box").css("box-shadow", "0px 0px 0px  #000000");
          }, 2000);
          //澄
          setTimeout(() => {
            $(".box").css("box-shadow", "0px 0px 30px  #ff8000");
          }, 4000);
          //暗
          setTimeout(() => {
            $(".box").css("box-shadow", "0px 0px 0px  #000000");
          }, 6000);
          //黃
          setTimeout(() => {
            $(".box").css("box-shadow", "0px 0px 30px  #ffff00");
          }, 8000);
          //暗
          setTimeout(() => {
            $(".box").css("box-shadow", "0px 0px 0px  #000000");
          }, 10000);
          //綠
          setTimeout(() => {
            $(".box").css("box-shadow", "0px 0px 30px  #00ff00");
          }, 12000);
          //暗
          setTimeout(() => {
            $(".box").css("box-shadow", "0px 0px 0px  #000000");
          }, 14000);
          //藍
          setTimeout(() => {
            $(".box").css("box-shadow", "0px 0px 30px  #0000ff");
          }, 16000);
          //暗
          setTimeout(() => {
            $(".box").css("box-shadow", "0px 0px 0px  #000000");
          }, 18000);
          //靛
          setTimeout(() => {
            $(".box").css("box-shadow", "0px 0px 30px  #7f00ff");
          }, 20000);
          //暗
          setTimeout(() => {
            $(".box").css("box-shadow", "0px 0px 0px  #000000");
          }, 22000);
          //紫
          setTimeout(() => {
            $(".box").css("box-shadow", "0px 0px 30px  #ff00ff");
          }, 24000);
          //暗
          setTimeout(() => {
            $(".box").css("box-shadow", "0px 0px 0px  #000000");
          }, 26000);
        }, 28000);
      });

      $('.stopBreath').on('click', function(){
        console.log(breathSetinterval)
        alert('這次跑完就會結束了喔~')
        clearInterval(breathSetinterval);
        $('.box').addClass('fire');
      });

      //   $(".rainbow").on("click", function () {
      //     interval = setInterval(() => {
      //       if (count < 20) {
      //         $(".box").eq(count).css("background", "lightblue");
      //         console.log(count);
      //         count++;
      //       } else if (count1 < 20) {
      //         $(".box").eq(count1).css("background", "gray");
      //         //console.log("hi");
      //         count1++;
      //       } else {
      //         let count = 0;
      //         let count1 = 0;
      //         console.log(count);
      //         console.log(count1);
      //         clearInterval(interval);
      //       }
      //     }, 50);
      //   });

      // $(".first-row .box").on("click", function () {
      //     console.log("0", $(".box").eq(0).length);
      //     console.log("0 prev", $(".box").eq(0).prev().length);

      //     let laser_prev = $(this).prev();
      //     let laser_next = $(this).next();

      //     laserStartInterval = setInterval(() => {
      //         $(this).css("background", "blue");

      //         if (laser_prev.length > 0) {
      //             laser_prev.css("background", "blue");
      //             laser_prev = laser_prev.prev();
      //         }

      //         if (laser_next.length > 0) {
      //             laser_next.css("background", "blue");
      //             laser_next = laser_next.next();

      //         }

      //         if (laser_prev.length === 0 && laser_next.length === 0) {
      //             clearInterval(laserStartInterval);
      //         }
      //         console.log("laser_prev", laser_prev);
      //         console.log("laser_next", laser_next);
      //     }, 50);

      // });

      //雷射效果
      $(".box").on("click", function () {
        //console.log("0", $(".box").eq(0).length);
        //  console.log("0 prev", $(".box").eq(0).prev().length);
        if ($(".box").hasClass("laser")) {
          let laser_prev = $(this).prev();
          let laser_next = $(this).next();
          let laser_prev1;

          laserStartInterval = setInterval(() => {
            $(this).css("box-shadow", "0px 0px 40px  #0072E3	");
            $(this).css("color", "#0072E3");

            if (laser_prev.length > 0) {
              laser_prev.css("box-shadow", "0px 0px 40px  #0072E3	");
              laser_prev.css("color", "#0072E3	");
              laser_prev = laser_prev.prev();
            }

            if (laser_next.length > 0) {
              laser_next.css("box-shadow", "0px 0px 40px  #0072E3");
              laser_next.css("color", "#0072E3");
              laser_next = laser_next.next();
            }

            if (laser_prev.length === 0 && laser_next.length === 0) {
              clearInterval(laserStartInterval);
            }
            //    console.log("laser_prev", laser_prev);
            //    console.log("laser_next", laser_next);
          }, 35);

          setTimeout(() => {
            let laser_prev = $(this).prev();
            let laser_next = $(this).next();

            laserStopInterval = setInterval(() => {
              $(this).css("box-shadow", "0px 0px 0px  #0072E3");
              $(this).css("color", "#ddd");

              if (laser_prev.length > 0) {
                laser_prev.css("box-shadow", "0px 0px 0px  #0072E3");
                laser_prev.css("color", "#ddd");
                laser_prev = laser_prev.prev();
              }

              if (laser_next.length > 0) {
                laser_next.css("box-shadow", "0px 0px 0px  #0072E3");
                laser_next.css("color", "#ddd");
                laser_next = laser_next.next();
              }

              if (laser_prev.length === 0 && laser_next.length === 0) {
                clearInterval(laserStopInterval);
              }
              //    console.log("laser_prev", laser_prev);
              //    console.log("laser_next", laser_next);
            }, 35);
          }, 750);
        } else {
          $(this).css("box-shadow", "0px 0px 30px  #FF3EFF");
          let thisx = $(this).data("x");
          let mx1 = $(this).data("x") - 1;
          let px1 = $(this).data("x") + 1;
          console.log("hi");
          //console.log(mx1);
          //console.log(px1);
          setTimeout(() => {
            $(this)
              .parent()
              .next()
              .children()
              .eq(px1)
              .css("box-shadow", "0px 0px 30px  #FF3EFF");
            $(this)
              .parent()
              .next()
              .children()
              .eq(thisx)
              .css("box-shadow", "0px 0px 30px  #FF3EFF");

            $(this)
              .parent()
              .children()
              .eq(px1)
              .css("box-shadow", "0px 0px 30px  #FF3EFF");

            $(this)
              .parent()
              .prev()
              .children()
              .eq(px1)
              .css("box-shadow", "0px 0px 30px  #FF3EFF");
            $(this)
              .parent()
              .prev()
              .children()
              .eq(thisx)
              .css("box-shadow", "0px 0px 30px  #FF3EFF");

            if (thisx === 0) {
              return true;
            } else {
              $(this)
                .parent()
                .next()
                .children()
                .eq(mx1)
                .css("box-shadow", "0px 0px 30px  #FF3EFF");
              $(this)
                .parent()
                .prev()
                .children()
                .eq(mx1)
                .css("box-shadow", "0px 0px 30px  #FF3EFF");
              $(this)
                .parent()
                .children()
                .eq(mx1)
                .css("box-shadow", "0px 0px 30px  #FF3EFF");
            }
          }, 400);
          setTimeout(() => {
            $(".box.fire").css("box-shadow", "0px 0px 30px  #000000");
          }, 1100);
        }
      });

      //煙火效果
      // $(".box").on("click", function () {

      // });
    </script>
  </body>
</html>
